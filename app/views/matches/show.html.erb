<div class="container-fluid">
  <p id="notice">
    <%= notice %>
  </p>

  <div class="form-group mb-3">
    <p><strong><%= t('.title') %>:</strong></p>
    <div>
      <%= @match.title %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.image') %>:</strong></p>
    <% if allowed_pic?(@match.image) %>
      <div>
        <%= link_to(image_tag(@match.image_as_thumbnail, class: 'img-fluid img-thumbnail'), @match.image) %>
        <%= link_to(t('attachments.delete_image'), purge_image_match_path(@match), method: :delete) if can_edit_match? %>
      </div>
    <% end %>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.description') %>:</strong></p>
    <div>
      <%= @match.description %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.creator') %>:</strong></p>
    <div>
      <%= link_to(@match.creator.username, @match.creator) %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.game') %>:</strong></p>
    <div>
      <%= link_to(@match.game.name, @match.game) %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.location') %>:</strong></p>
    <div>
      <%= @match.location %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.number_of_players') %>:</strong></p>
    <div>
      <%= @match.number_of_players %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.invited_users') %>:</strong></p>
    <div>
      <% User.where(username: @match.invited_users).each do |invitee| %>
        <%= link_to(invitee.username, invitee) %>
      <% end %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.joined_players') %>:</strong></p>
    <div>
      <% @match.participants.each do |participant| %>
        <%= link_to(participant.username, participant) %>
      <% end %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.start_at') %>:</strong></p>
    <div>
      <%= l(@match.start_at, format: :long) %>
    </div>
  </div>

  <div class="form-group mb-3">
    <p><strong><%= t('.end_at') %>:</strong></p>
    <div>
      <%= l(@match.end_at, format: :long) %>
    </div>
  </div>

  <% if can_participate? && !already_participating? %>
    <%= button_to t('.join') , match_participants_path(match_id: @match, user_id: current_user.id), class: "btn app-btn-primary theme-btn mx-auto" %>
  <% end %>

  <div class="form-group mb-3">

    <strong><%= t('.pictures') %></strong>
  
    <hr class="mt-2 mb-5">
  
    <div class="row text-center text-lg-start">
  
      <% @match.pictures.each do |pic| %>
        <div class="col-lg-3 col-md-4 col-6">
          <%= link_to(image_tag(picture_as_thumbnail(pic), class: 'img-fluid img-thumbnail'), pic, class: 'd-block mb-4 h-100') %>
        </div>
        <%= link_to(t('attachments.delete_image'), purge_attachment_path(pic), method: :delete) if can_edit_match? %>
      <% end %>

    <div>
  </div>

  <%= link_to t('.edit') , edit_match_path(@match), class: "btn btn-primary min-width-btn" if can_edit_match? %>
  <%= link_to t('.back') , matches_path, class: "btn btn-light min-width-btn" %>
</div>

<%= render partial: 'shared/comments_block', locals: { commentable: @match } %>

